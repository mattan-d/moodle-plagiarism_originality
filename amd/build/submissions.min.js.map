{"version":3,"file":"submissions.min.js","sources":["../src/submissions.js"],"sourcesContent":["/**\n * JS functions.\n *\n * @package\n * @copyright  2023 mattandor <mattan@centricapp.co>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery'], function($) {\n  return {\n    unsetLimit: function() {\n      var attemptreopenmethod = $('#id_attemptreopenmethod'), maxattempts = $('#id_maxattempts');\n\n      attemptreopenmethod.find('option').removeAttr('disabled');\n      maxattempts.find('option').removeAttr('disabled');\n    }, setLimit: function() {\n      var attemptreopenmethod = $('#id_attemptreopenmethod'), maxattempts = $('#id_maxattempts');\n\n      attemptreopenmethod.find('option').attr('disabled', true);\n      attemptreopenmethod.find('[value=manual]').prop('selected', true).removeAttr('disabled');\n      attemptreopenmethod.change().click();\n\n      maxattempts.find('option').attr('disabled', true);\n      maxattempts.find('[value=2]').prop('selected', true).removeAttr('disabled');\n      maxattempts.change().click();\n    }, submissions: function() {\n\n      var that = this;\n      var originalityDropdown = $('#id_originality_use'), originalityDropdownGhostwriter = $('#id_originality_use_ghostwriter'),\n          submitBtn = $('input[id=id_submitbutton], input[id=id_submitbutton2]'), originalityStatus = originalityDropdown.val(),\n          allowFilesGhostwriter = '*';//'.rtf,.docx,.doc';\n\n      // Ghostwriter Init\n      var el = $('#fitem_fgroup_id_assignsubmission_file_filetypes'), ghostinit = setInterval(function() {\n        {\n          if (originalityDropdownGhostwriter.val() == 1) {\n            el.find('[type=text]').val(allowFilesGhostwriter).attr('readonly', true);\n            el.find('[type=button]').attr('disabled', true);\n          }\n          if (el.find('[type=button]').length > 0) {\n            clearInterval(ghostinit);\n          }\n        }\n      }, 2000);\n\n      originalityDropdownGhostwriter.change(function() {\n        var base = $(this), status = base.val();\n\n        if (status == 1) {\n          //el.find('[type=text]').val(allowFilesGhostwriter).attr('readonly', true);\n          el.find('[type=button]').attr('disabled', true);\n          // Notify(true);\n        } else {\n          //el.find('[type=text]').removeAttr('readonly');\n          el.find('#id_assignsubmission_file_filetypes').val('*');\n          el.find('[type=button]').removeAttr('disabled');\n        }\n      });\n\n      if (originalityStatus == 2) {\n        that.setLimit();\n      }\n\n      originalityDropdown.change(function() {\n        var base = $(this), status = base.val(), msg = $('#assignment_has_submissions_notifications');\n\n        if (status == 2) {\n          that.setLimit();\n        } else {\n          that.unsetLimit();\n        }\n\n        if (status == 1) {\n          $('.originality-message').toggle(true);\n\n          if (msg.length) {\n            require(['core/notification'], function(notification) {\n              notification.alert('Notification', msg.html(), 'OK');\n            });\n          }\n        }\n      });\n      submitBtn.on('click', function(e) {\n        var isOnlinetext = $('#id_assignsubmission_onlinetext_enabled').is(':checked'),\n            isGwon = $('#id_originality_use_ghostwriter').val();\n\n        if (isOnlinetext && isGwon == 1 && $('.originality-gw-notify').length) {\n          e.preventDefault();\n          require(['core/notification'], function(notification) {\n            notification.alert('', $('.core-notification msg').text(), $('.core-notification btn').text());\n          });\n        }\n      });\n\n      if ($('#originality-checkbox').length) {\n        $('#region-main input[id=id_submitbutton]').click(function(e) {\n          var isChecked = $('#originality-checkbox').is(':checked');\n          if (!isChecked) {\n            e.preventDefault();\n            require(['core/notification'], function(notification) {\n              notification.alert('Originality Warning', $('.core-notification msg').text(), $('.core-notification btn').text());\n            });\n            return;\n          }\n        });\n\n        $('#region-main #originality-checkbox').click(function() {\n          var isChecked = $(this).is(':checked');\n          $('.originality-checkbox-form').remove();\n          $('.mform').\n              prepend('<input type=\"hidden\" value=\"' + isChecked + '\" ' +\n                  'class=\"originality-checkbox-form\" name=\"originality-checkbox-form\">');\n        });\n      }\n    },\n  };\n});\n"],"names":["define","$","unsetLimit","attemptreopenmethod","maxattempts","find","removeAttr","setLimit","attr","prop","change","click","submissions","that","this","originalityDropdown","originalityDropdownGhostwriter","submitBtn","originalityStatus","val","el","ghostinit","setInterval","length","clearInterval","status","msg","toggle","require","notification","alert","html","on","e","isOnlinetext","is","isGwon","preventDefault","text","isChecked","remove","prepend"],"mappings":";;;;;;;AAQAA,4CAAO,CAAC,UAAW,SAASC,GAC1B,MAAO,CACLC,WAAY,WACV,IAAIC,oBAAsBF,EAAE,2BAA4BG,YAAcH,EAAE,mBAExEE,oBAAoBE,KAAK,UAAUC,WAAW,YAC9CF,YAAYC,KAAK,UAAUC,WAAW,WACvC,EAAEC,SAAU,WACX,IAAIJ,oBAAsBF,EAAE,2BAA4BG,YAAcH,EAAE,mBAExEE,oBAAoBE,KAAK,UAAUG,KAAK,YAAY,GACpDL,oBAAoBE,KAAK,kBAAkBI,KAAK,YAAY,GAAMH,WAAW,YAC7EH,oBAAoBO,SAASC,QAE7BP,YAAYC,KAAK,UAAUG,KAAK,YAAY,GAC5CJ,YAAYC,KAAK,aAAaI,KAAK,YAAY,GAAMH,WAAW,YAChEF,YAAYM,SAASC,OACtB,EAAEC,YAAa,WAEd,IAAIC,KAAOC,KACPC,oBAAsBd,EAAE,uBAAwBe,+BAAiCf,EAAE,mCACnFgB,UAAYhB,EAAE,yDAA0DiB,kBAAoBH,oBAAoBI,MAIhHC,GAAKnB,EAAE,oDAAqDoB,UAAYC,YAAY,WAExC,GAAxCN,+BAA+BG,QACjCC,GAAGf,KAAK,eAAec,IAND,KAM4BX,KAAK,YAAY,GACnEY,GAAGf,KAAK,iBAAiBG,KAAK,YAAY,IAExCY,GAAGf,KAAK,iBAAiBkB,OAAS,GACpCC,cAAcH,UAGnB,EAAE,KAEHL,+BAA+BN,OAAO,WAGtB,GAFHT,EAAEa,MAAqBK,MAIhCC,GAAGf,KAAK,iBAAiBG,KAAK,YAAY,IAI1CY,GAAGf,KAAK,uCAAuCc,IAAI,KACnDC,GAAGf,KAAK,iBAAiBC,WAAW,YAExC,GAEyB,GAArBY,mBACFL,KAAKN,WAGPQ,oBAAoBL,OAAO,WACzB,IAAoBe,OAATxB,EAAEa,MAAqBK,MAAOO,IAAMzB,EAAE,6CAEnC,GAAVwB,OACFZ,KAAKN,WAELM,KAAKX,aAGO,GAAVuB,SACFxB,EAAE,wBAAwB0B,QAAO,GAE7BD,IAAIH,QACNK,QAAQ,CAAC,qBAAsB,SAASC,cACtCA,aAAaC,MAAM,eAAgBJ,IAAIK,OAAQ,KACjD,GAGN,GACAd,UAAUe,GAAG,QAAS,SAASC,GAC7B,IAAIC,aAAejC,EAAE,2CAA2CkC,GAAG,YAC/DC,OAASnC,EAAE,mCAAmCkB,MAE9Ce,cAA0B,GAAVE,QAAenC,EAAE,0BAA0BsB,SAC7DU,EAAEI,iBACFT,QAAQ,CAAC,qBAAsB,SAASC,cACtCA,aAAaC,MAAM,GAAI7B,EAAE,0BAA0BqC,OAAQrC,EAAE,0BAA0BqC,OACzF,GAEJ,GAEIrC,EAAE,yBAAyBsB,SAC7BtB,EAAE,0CAA0CU,MAAM,SAASsB,GAEzD,IADgBhC,EAAE,yBAAyBkC,GAAG,YAM5C,OAJAF,EAAEI,sBACFT,QAAQ,CAAC,qBAAsB,SAASC,cACtCA,aAAaC,MAAM,sBAAuB7B,EAAE,0BAA0BqC,OAAQrC,EAAE,0BAA0BqC,OAC5G,EAGJ,GAEArC,EAAE,sCAAsCU,MAAM,WAC5C,IAAI4B,UAAYtC,EAAEa,MAAMqB,GAAG,YAC3BlC,EAAE,8BAA8BuC,SAChCvC,EAAE,UACEwC,QAAQ,+BAAiCF,UAAjC,wEAEd,GAEJ,EAEJ"}